<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self'; script-src 'self';">
    <title>vMix Data Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>vMix Data Manager</h1>
        </header>

        <section class="profile-manager">
            <h2>配置文件管理</h2>
            <div class="profile-controls">
                <select id="profile-select" title="选择一个已有的配置或新建一个"></select>
                <button id="new-profile-btn" title="创建一个新的数据配置">新建</button>
                <button id="delete-profile-btn" title="删除当前选中的配置">删除</button>
            </div>
            <div class="url-display">
                <label for="vmix-url">vMix 数据源 URL (点击复制):</label>
                <input type="text" id="vmix-url" readonly>
            </div>
            <div class="connection-status">
                <label>连接状态:</label>
                <span id="connection-status" class="status-disconnected">未连接</span>
            </div>
        </section>

        <section class="data-manager">
            <h2 id="current-profile-title">数据项管理</h2>
            
            <div class="add-item-form">
                <h3>添加新数据项</h3>
                <form id="add-item-form">
                    <div class="form-group">
                        <label for="item-name">数据名称:</label>
                        <input type="text" id="item-name" name="itemName" required>
                    </div>
                    <div class="form-group">
                        <label for="item-value">数据值:</label>
                        <input type="text" id="item-value" name="itemValue" required>
                    </div>
                    <button type="submit" id="add-item-btn">添加数据项</button>
                </form>
            </div>
            
            <div class="data-list-container">
                <h3>数据项列表</h3>
                <div id="data-items-container"></div>
            </div>
            
            <div class="json-preview">
                <h3>实时预览 (JSON格式)</h3>
                <pre id="json-preview-content"></pre>
            </div>
        </section>
    </div>
    
    <div id="new-profile-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <form id="new-profile-form">
                <h2>创建新配置文件</h2>
                <p>请输入新配置文件的名称。只能包含字母、数字、下划线和连字符。</p>
                <input type="text" id="new-profile-name-input" placeholder="例如: my_profile" required>
                <div class="modal-actions">
                    <button type="button" id="modal-cancel-btn">取消</button>
                    <button type="submit" id="modal-ok-btn">确定</button>
                </div>
            </form>
        </div>
    </div>

    <div id="edit-item-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <form id="edit-item-form">
                <h2>编辑数据项</h2>
                <div class="form-group">
                    <label for="edit-item-name-input">数据名称 (不可修改):</label>
                    <input type="text" id="edit-item-name-input" readonly>
                </div>
                <div class="form-group">
                    <label for="edit-item-value-input">新数据值:</label>
                    <input type="text" id="edit-item-value-input" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="edit-modal-cancel-btn">取消</button>
                    <button type="submit">保存更改</button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>